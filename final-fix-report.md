# Отчет о исправлении ошибки сборки Docker в Next.js проекте

## Проблема

В проекте возникала ошибка при сборке Docker:

```
Module not found: Can't resolve '@/hooks/use-toast'
```

После глубокого анализа были выявлены следующие причины:

1. **Неправильная настройка алиасов путей в Next.js**
   - В tsconfig.json настроен алиас `"@/*": ["./*"]`
   - Но в next.config.js не было явного указания алиаса `@` на корень проекта
   - Webpack не учитывает настройки из tsconfig.json без явной конфигурации

2. **Отсутствие dev-зависимостей при сборке**
   - В Dockerfile использовался флаг `--omit=dev` при установке зависимостей
   - Это приводило к тому, что TypeScript и другие инструменты разработки не устанавливались
   - Next.js не мог корректно обрабатывать TypeScript-конфигурацию

## Решение

1. **Обновлен next.config.js**
   - Добавлен общий алиас `'@': path.resolve(__dirname)` на корень проекта
   - Добавлен алиас `'@/hooks': path.resolve(__dirname, './hooks')` на директорию hooks
   - Это позволяет webpack корректно разрешать импорты с алиасом `@/`

2. **Обновлен Dockerfile**
   - Удален флаг `--omit=dev` при установке зависимостей
   - Теперь все dev-зависимости, включая TypeScript, устанавливаются на этапе сборки
   - Это позволяет Next.js корректно обрабатывать TypeScript-конфигурацию

## Дополнительные рекомендации

1. **Проверка регистра путей**
   - В Linux (Docker) файловая система чувствительна к регистру
   - Убедитесь, что регистр в импортах соответствует регистру в именах файлов и директорий

2. **Использование абсолютных импортов**
   - Рекомендуется использовать абсолютные импорты с алиасом `@/` вместо относительных импортов
   - Это делает код более читаемым и устойчивым к перемещению файлов

3. **Очистка кэша при сборке**
   - При сборке Docker рекомендуется использовать флаг `--no-cache`
   - На Render.com рекомендуется очищать кэш сборки перед новым деплоем

